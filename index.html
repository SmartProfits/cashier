<!DOCTYPE html>
<html lang="zh">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Cashier Tools</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			padding: 15px;
			margin: 0;
			background-color: #1c1c1c;
			color: #e0e0e0;
			transition: background-color 0.3s, color 0.3s;
		}

		body.dark-mode {
			background-color: #1c1c1c;
			color: #e0e0e0;
		}

		.category-container {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 10px;
			margin-bottom: 20px;
		}

		#suggestions {
			border: 1px solid #ccc;
			max-height: 150px;
			overflow-y: auto;
			background-color: white;
			position: absolute;
			width: 100%;
			z-index: 10;
		}

		.contact-info {
			font-size: 1rem;
			/* Â≠ó‰ΩìÂ§ßÂ∞è */
			font-style: italic;
			/* Êñú‰Ωì */
			color: #555;
			/* ÊµÖÁÅ∞Ëâ≤Â≠ó‰Ωì */
			text-align: center;
			/* Â±Ö‰∏≠ÂØπÈΩê */
			background-color: #f9f9f9;
			/* ÊüîÂíåÁöÑËÉåÊôØËâ≤ */
			padding: 10px;
			/* ÂÜÖËæπË∑ù */
			border-radius: 8px;
			/* ÂúÜËßíËæπÊ°Ü */
			margin-bottom: 20px;
			/* ‰∏é‰∏ãÊñπÂÜÖÂÆπÁöÑÈó¥Ë∑ù */
			border: 1px solid #ddd;
			/* ÊµÖËâ≤ËæπÊ°Ü */
		}


		#suggestions div {
			padding: 8px;
			cursor: pointer;
			color: #333;
		}

		#suggestions div:hover {
			background-color: #f0f0f0;
		}

		#productList div {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 15px;
		}

		#productList label {
			flex-grow: 1;
			margin-right: 10px;
		}


		#suggestions {
			border: 1px solid #ccc;
			max-height: 150px;
			overflow-y: auto;
			background-color: white;
			position: absolute;
			width: 170px;
			z-index: 10;
		}

		#suggestions div {
			padding: 8px;
			cursor: pointer;
			color: #333;
		}

		#suggestions div:hover {
			background-color: #f0f0f0;
		}

		input[type="number"] {
			width: 80px;
			margin-left: 10px;
			text-align: right;
		}

		h1 {
			font-size: 2.5rem;
			font-weight: bold;
			text-align: center;
			margin-bottom: 110px;
		}

		#result {
			width: 100%;
			height: 250px;
			border: 1px solid #ccc;
			padding: 10px;
			margin-top: 10px;
			white-space: pre-wrap;
			overflow: auto;
			font-size: 1.1rem;
			color: black;
			background-color: #fff;
			border-radius: 8px;
		}

		.button-container {
			display: flex;
			justify-content: space-between;
			margin-bottom: 10px;
		}

		.action-buttons {
			display: flex;
			justify-content: space-between;
			margin-top: 5px;
		}


		button {
			padding: 5px 10px;
			font-size: 1rem;
			margin: 0 5px;
			cursor: pointer;
		}

		span {
			font-size: 1.2rem;
		}


		.toggle-mode-btn {
			background-color: #007bff;
			color: white;
			padding: 10px 20px;
			margin-bottom: 20px;
			cursor: pointer;
			border: none;
			border-radius: 5px;
			font-size: 1rem;
		}

		.saved-button {
			background-color: #007bff;
		}

		#searchBar {
			width: 150px;
			padding: 10px;
			margin-bottom: 20px;
			border-radius: 5px;
			border: 1px solid #ccc;
			font-size: 1.1rem;
		}

		.payment-section {
			margin: 20px 0;
			padding: 15px;
			border-radius: 8px;
			background-color: #2c2c2c;
		}

		.payment-options {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 10px;
			margin-top: 10px;
		}

		.payment-option {
			padding: 15px 10px;
			border-radius: 8px;
			background-color: #3c3c3c;
			cursor: pointer;
			transition: all 0.3s ease;
			text-align: center;
			display: flex;
			align-items: center;
			justify-content: center;
			min-height: 60px;
		}

		.payment-option span {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 5px;
			font-size: 0.9rem;
		}

		.payment-option span i {
			font-size: 1.5rem;
		}

		.payment-option:hover {
			background-color: #4c4c4c;
			transform: translateY(-2px);
		}

		.payment-option.selected {
			background-color: #007bff;
			color: white;
		}

		/* Ê∑ªÂä†ÂìçÂ∫îÂºèËÆæËÆ° */
		@media screen and (max-width: 600px) {
			.payment-options {
				grid-template-columns: repeat(3, 1fr);
			}

			.payment-option {
				padding: 10px 5px;
				min-height: 50px;
			}

			.payment-option span {
				font-size: 0.8rem;
			}
		}

		/* ÈíàÂØπÂ∞èÂ±èÂπï‰ºòÂåñÊ®°ÊÄÅÊ°Ü */
		@media screen and (max-width: 600px) {
			#modalContainer {
				width: 90%; /* Âç†Êª°Â§ßÈÉ®ÂàÜÂ±èÂπï */
				max-height: 70%; /* È´òÂ∫¶‰∏çË∂ÖËøáÂ±èÂπïÁöÑ 70% */
			}

			#modalContainer button {
				font-size: 1rem; /* Ë∞ÉÊï¥ÊåâÈíÆÂ≠ó‰ΩìÂ§ßÂ∞è */
				padding: 10px; /* Â¢ûÂä†ÊåâÈíÆÁöÑÁÇπÂáªÂå∫Âüü */
			}
		}
	</style>
</head>

<body>

	<div class="header">
		<h1>Sales Listing</h1>
	</div>
	
	<div class="search-container">
		<input type="text" id="searchBar" placeholder="Search for items..." onfocus="this.value=''"
			onkeyup="searchItems()">
		<div id="suggestions"></div>
	</div>

	<h3>Category</h3>
	<div class="category-container" id="categoryContainer"></div>

	<div id="productList"></div>

	<div class="payment-section" style="display: none;">
		<h3>Payment Method</h3>
		<div class="payment-options">
			<label class="payment-option">
				<input type="radio" name="store" value="*Cash*" onclick="toggleCashInput(); updateResult(); selectPayment(this)">
				<span>
					üíµ<br>
					Cash
				</span>
			</label>
			<label class="payment-option">
				<input type="radio" name="store" value="*Card*" onclick="hideCashInput(); updateResult(); selectPayment(this)">
				<span>
					üí≥<br>
					Card
				</span>
			</label>
			<label class="payment-option">
				<input type="radio" name="store" value="*E-Wallet*" onclick="hideCashInput(); updateResult(); selectPayment(this)">
				<span>
					üì±<br>
					E-wallet
				</span>
			</label>
		</div>
	</div>

	<div id="cashInputContainer" style="display: none;">
		<input type="number" id="cashAmount" placeholder="Enter cash amount" 
			   style="background-color: white; color: black; padding: 5px;"
			   oninput="calculateChange()">
		<div id="changeAmount" style="color: #e0e0e0; margin-left: 10px; display: inline-block;"></div>
	</div>

	<div class="action-buttons">
		<button onclick="clearAll()">Next Customer</button>
		<span id="currentBillDisplay" style="margin-left: 10px; font-weight: bold;">Current Bill: 001</span>
	</div>

	<div id="result"></div>

	<div>
		<h3>Search or Delete Bill</h3>
		<input type="text" id="billSearchInput" placeholder="Enter bill number (e.g., 001)">
		<button onclick="searchBill(document.getElementById('billSearchInput').value)">Search</button>
		<button onclick="deleteBill()">Delete</button>
	</div>

	<div>
		<button onclick="showSalesClosing()" style="margin-top: 20px; padding: 10px 20px; font-size: 16px;">Sales Closing</button>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
	<script>
		// ÂàÜÁ±ªÂïÜÂìÅ
		const categories = {
			BanHeang: [
				{ id: 1, name: "Tambun Original", price: 17.90 },
				{ id: 2, name: "Tambun Pandan", price: 17.90 },
				{ id: 3, name: "Tambun White Lotus", price: 20.80 },
				{ id: 4, name: "Tau Sar Pheah", price: 16.80 },
				{ id: 5, name: "Heong Pheah", price: 16.80 },
				{ id: 6, name: "Beh Teh Saw", price: 16.80 },
				{ id: 7, name: "Phong Pheah", price: 16.80 },
				{ id: 8, name: "Pepper Biscuit", price: 0 },
				{ id: 9, name: "Hup Toh Soh", price: 16.80 },
				{ id: 10, name: "Omlette Crisp Chocolate", price: 19.80 },
				{ id: 11, name: "Omlette Crisp Pandan", price: 19.80 },
				{ id: 12, name: "Kai Chai Biscuit", price: 14.80 },
				{ id: 13, name: "Almond Slice", price: 0 },
				{ id: 14, name: "Almond Slice Salted Egg", price: 0 },
				{ id: 15, name: "Durian Crisp", price: 17.80 },
				{ id: 16, name: "Coconut Crisp", price: 17.80 },
				{ id: 17, name: "Salted Fish Crisp", price: 17.80 },
				{ id: 18, name: "Salted Egg Crisp", price: 17.80 },
				{ id: 19, name: "Cheese Crisp", price: 17.80 },
				{ id: 20, name: "Chic Kut Teh", price: 18 },
				{ id: 21, name: "Ginger Slice", price: 19.80 },
				{ id: 26, name: "BH Dried Mango", price: 24.80 },
				{ id: 27, name: "Kacang Tumbuk", price: 8.90 },
				{ id: 28, name: "Gula Kacang", price: 8.90 },
				{ id: 29, name: "Black Sesame Peanut", price: 13.80 },
				{ id: 30, name: "Shat Kek Ma", price: 21.80 },
				{ id: 31, name: "Shat Kek Ma (Brown Sugar)", price: 21.80 },
				{ id: 32, name: "Coconut Biscuits (Beg)", price: 17.80 },
				{ id: 33, name: "BH Freeze Dried Durian", price: 26.80 },
				{ id: 34, name: "BH Freeze Dried Mango", price: 26.80 },
				{ id: 36, name: "Butter Cookies", price: 16.80 },
				{ id: 37, name: "Chocolate Cookies", price: 16.80 },
				{ id: 38, name: "Raisin Cookies", price: 16.80 },
				{ id: 39, name: "Almond Cookies", price: 16.80 },
				{ id: 40, name: "Pineapple Tart", price: 0 },
				{ id: 41, name: "Red Bean Mochi", price: 18.70 },
				{ id: 42, name: "Peanut Mochi", price: 18.70 },
				{ id: 43, name: "Green Tea Mochi", price: 18.70 },
				{ id: 44, name: "Durian Mochi", price: 18.70 },
				{ id: 45, name: "Yam Mochi", price: 18.70 },
				{ id: 46, name: "Mochi Milk Yam Filling", price: 18.70 },
				{ id: 47, name: "Mochi Milk Mango Filling", price: 18.70 },
				{ id: 48, name: "Mochi Milk Green Tea", price: 18.70 },
				{ id: 52, name: "Fillet Cracker With Anchovy", price: 14.60 },
				{ id: 53, name: "Fillet Cracker With Seaweed", price: 14.60 },
				{ id: 54, name: "Sakura Shrimp", price: 14.60 },
				{ id: 60, name: "Frugurt Yogurt Blueberry", price: 24.80 },
				{ id: 61, name: "Frugurt Yogurt Peach", price: 24.80 },
				{ id: 62, name: "Frugurt Yogurt Mango", price: 24.80 },
				{ id: 63, name: "Durian Pudding", price: 24.80 },
				{ id: 64, name: "Coconut Pudding", price: 24.80 },
				{ id: 65, name: "BH Dodol Durian", price: 0 },
				{ id: 66, name: "BH Dodol Coconut", price: 0 },
				{ id: 67, name: "BH Dodol Pandan", price: 0 },
				{ id: 68, name: "Durian Beh Teh Saw", price: 28.90 },
			],
			HopHup: [
				{ id: 70, name: "Musang King Tart", price: 19 },
				{ id: 71, name: "Mango Tart", price: 19 },
				{ id: 72, name: "Durian Wafer Roll", price: 23.80 },
				{ id: 73, name: "Omelette Durian", price: 25.80 },
				{ id: 76, name: "HT Coconut Ori Cookies", price: 14.80 },
				{ id: 77, name: "HT Coconut Pandan Cookies", price: 14.80 },
				{ id: 78, name: "HT Dodol Kopi", price: 21.80 },
				{ id: 79, name: "HT Dodol Durian", price: 21.80 },
				{ id: 80, name: "HT Freeze Dried Mango", price: 26.80 },
				{ id: 81, name: "HT Freeze Dried Durian", price: 26.80 },
				{ id: 82, name: "Salted Egg Fish Skin", price: 30 },
				{ id: 83, name: "Salted Egg Fish Skin Spicy", price: 30 },
				{ id: 84, name: "Salted Egg Salmon Skin", price: 30 },
				{ id: 94, name: "HT Musang King Durian Candy", price: 21.80 },
				{ id: 126, name: "HT Dried Fruit Mango ", price: 24.80 }
			],
			Chocolate: [
				{ id: 108, name: "AD Chocolate Durian", unit: 'pc', price: 39 },
				{ id: 109, name: "AD Chocolate Sabah Tea", unit: 'pc', price: 39 },
				{ id: 110, name: "AD Chocolate Mango", unit: 'pc', price: 39 },
				{ id: 111, name: "AD Chocolate Chili", unit: 'pc', price: 39 },
				{ id: 112, name: "AD Chocolate Dark", unit: 'pc', price: 39 },
				{ id: 113, name: "AD Chocolate Coffee", unit: 'pc', price: 39 },
				{ id: 114, name: "AD Chocolate Banana", unit: 'pc', price: 39 },
				{ id: 115, name: "AD Chocolate Tiramisu", unit: 'pc', price: 39 },
				{ id: 116, name: "AD Chocolate Mint", unit: 'pc', price: 39 },
				{ id: 117, name: "AD Chocolate Rambutan", unit: 'pc', price: 39 },
				{ id: 118, name: "AD Chocolate Soursup", unit: 'pc', price: 39 }
			],
			Sotong: [
				{ id: 85, name: "Cuttlefish Red", price: 21.50 },
				{ id: 86, name: "Cuttlefish Lemon", price: 21.50 },
				{ id: 87, name: "Cuttlefish Honey", price: 21.50 },
				{ id: 88, name: "Cuttlefish Floss Original", price: 21.50 },
				{ id: 89, name: "Cuttlefish Massive", price: 21.50 },
				{ id: 90, name: "Cuttlefish Whole", price: 21.50 },
				{ id: 91, name: "Cuttlefish Roasted", price: 21.50 },
				{ id: 92, name: "Cuttlefish Chili", price: 21.50 },
				{ id: 93, name: "Five Star Cuttlefish", price: 34.00 },
				{ id: 49, name: "BH Sotong Cuttlefish", price: 14.60 },
				{ id: 50, name: "BH Gula Cuttlefish", price: 14.60 },
				{ id: 51, name: "BH Satay Fish", price: 14.60 }
			],
			Coffee: [
				{ id: 22, name: "BH W/Coffee(Mini)", price: 25.80 },
				{ id: 23, name: "BH W/Coffee(Mini)No Sugar", price: 25.80 },
				{ id: 25, name: "BH Durian W/Coffee(Mini)", price: 25.80 },
				{ id: 24, name: "BH Teh Tarik(Mini)", price: 25.80 },
				{ id: 55, name: "BH W/Coffee", price: 29.50 },
				{ id: 119, name: "BH W/Coffee No Sugar", price: 29.50 },
				{ id: 58, name: "BH Teh Tarik", price: 29.50 },
				{ id: 59, name: "BH Durian White Coffee", price: 29.50 },
				{ id: 99, name: "Kopi Tenom Silver", price: 11.70 },
				{ id: 100, name: "Kopi Tenom Gold", price: 12.70 },
				{ id: 101, name: "Kopi Tenom Blue", price: 14.80 },
				{ id: 102, name: "Kopi Tenom Green", price: 14.30 },
				{ id: 125, name: "Kopi Tenom Red ", price: 15.60 }
			],
			Amplang: [
				{ id: 96, name: "Amplang Ikan", price: 12 },
				{ id: 97, name: "Amplang Udang", price: 12 },
				{ id: 98, name: "Amplang Sotong", price: 12 },
				{ id: 143, name: "kuih Cincin", price: 12 },
				{ id: 144, name: "Kuih Cincin (Mini)", price: 18 }

			],
			SabahTea: [
				{ id: 127, name: "Sabah Tea (S)", price: 7.50 },
				{ id: 128, name: "Sabah Tea (B)", price: 14 },
				{ id: 129, name: "Sabah Tea Box", price: 40 },
				{ id: 130, name: "Sabah Tea Gift Box", price: 96 },
				{ id: 131, name: "Sabah Tea Agarwood", price: 15.80 },
				{ id: 132, name: "Sabah Tea Cinnamon", price: 15.80 },
				{ id: 133, name: "Sabah Tea Ginger", price: 15.80 },
				{ id: 134, name: "Sabah Tea Misai Kuching", price: 15.80 },
				{ id: 135, name: "Sabah Tea Tongat Ali", price: 15.80 },
				{ id: 136, name: "Sabah Tea Geranium", price: 15.80 },
				{ id: 137, name: "Sabah Tea Lemon Grass", price: 15.80 },
				{ id: 138, name: "Sabah Tea Pandan", price: 15.80 },
				{ id: 139, name: "Sabah Tea Geranium", price: 15.80 },
				{ id: 140, name: "Sabah Tea Organic", price: 20 },
				{ id: 141, name: "Sabah Tea Wooden box (B)", price: 65 },
				{ id: 142, name: "Sabah Tea Wooden box (S)", price: 47.70 },

			],
			Other: [
				{ id: 106, name: "Fruity Gummy Assorted", price: 8.50 },
				{ id: 124, name: "Fruity Gummy Mango", price: 8.50 },
				{ id: 69, name: "Durian Kuih", price: 33 },
				{ id: 120, name: "Anchovy Blue", price: 28.80 },
				{ id: 121, name: "Anchovy Green", price: 28.80 },
				{ id: 122, name: "Anchovy Red", price: 19.80 },
				{ id: 123, name: "Anchovy Yellow", price: 19.80 },
				{ id: 145, name: "Bird Nest", price: 0, customPrice: true },
				{ id: 146, name: "Fish Maw", price: 0, customPrice: true },
				{ id: 147, name: "Sea Cucumber", price: 0, customPrice: true }
			]
		};

		let selectedItems = {};
		let billNumber = 1; // ÂçïÊçÆÁºñÂè∑
		let salesSummary = {
			cash: 0,
			card: 0,
			ewallet: 0,
		}; // ‰øùÂ≠òÈîÄÂîÆÁªüËÆ°Êï∞ÊçÆ
		let soldItems = {}; // ‰øùÂ≠òÂîÆÂá∫ÁöÑÁâ©ÂìÅÊï∞ÊçÆ { name: { quantity: x, totalPrice: y } }
		let selectedStore = ""; // ‰øùÂ≠òÈÄâ‰∏≠ÁöÑÂ∫óÈì∫ÂêçÁß∞
		let supervisorName = "";
		let cashierName = "";

		window.onload = function () {
			const categoryContainer = document.getElementById("categoryContainer");
			for (let category in categories) {
				const label = document.createElement("label");
				label.innerHTML = `<input type="radio" name="category" value="${category}" onclick="showCategory()">${category}`;
				categoryContainer.appendChild(label);
			}

			// ÂºÄÂßãÊó∂ÊòæÁ§∫ËæìÂÖ• Supervisor Âíå Cashier ÁöÑÂºπÁ™ó
			showSupervisorAndCashierModal();
		};

		function showSupervisorAndCashierModal() {
			const modal = document.getElementById("supervisorModal");
			modal.style.display = "block"; // ÊòæÁ§∫Ê®°ÊÄÅÊ°Ü
		}

		function submitSupervisorAndCashier() {
			const supervisorInput = document.getElementById("supervisorInput").value.trim();
			const cashierInput = document.getElementById("cashierInput").value.trim();

			if (!supervisorInput || !cashierInput) {
				alert("Both Supervisor and Cashier names are required!");
				return;
			}

			supervisorName = supervisorInput;
			cashierName = cashierInput;

			// ÈöêËóèÊ®°ÊÄÅÊ°Ü
			const modal = document.getElementById("supervisorModal");
			modal.style.display = "none";

			// ÊòæÁ§∫Â∫óÈì∫ÈÄâÊã©Ê®°ÊÄÅÊ°Ü
			showStoreSelectionModal();
		}

		function showStoreSelectionModal() {
			const modal = document.getElementById("storeModal");
			modal.style.display = "block"; // ÊòæÁ§∫Ê®°ÊÄÅÊ°Ü
		}

		function selectStore(storeName) {
			selectedStore = storeName;

			// ÈöêËóèÊ®°ÊÄÅÊ°Ü
			const modal = document.getElementById("storeModal");
			modal.style.display = "none";

			alert(`Store "${storeName}" selected successfully.`);
			resetAllData(); // ÈáçÁΩÆÊï∞ÊçÆ
			updateCurrentBillDisplay();
		}

		function resetAllData() {
			billNumber = 1;
			salesSummary = { cash: 0, card: 0, ewallet: 0 };
			soldItems = {};
			selectedItems = {};

			// Ê∏ÖÁ©∫Êú¨Âú∞Â≠òÂÇ®‰∏≠ÁöÑÊâÄÊúâÂçïÊçÆ
			Object.keys(localStorage).forEach((key) => {
				if (key.startsWith("bill_")) {
					localStorage.removeItem(key);
				}
			});

			localStorage.setItem("billNumber", billNumber);
			alert(`All previous data has been reset. Starting fresh from Bill 001.`);
		}

		function loadProducts(products) {
			const productList = document.getElementById('productList');
			productList.innerHTML = '';

			products.forEach(product => {
				const div = document.createElement('div');
				if (product.customPrice) {
					div.innerHTML = `
                    <label>${product.name}</label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <input type="number" 
                               id="price${product.id}" 
                               placeholder="Enter price" 
                               style="width: 100px; padding: 5px; background-color: white; color: black;"
                               step="0.10">
                        <button onclick="addCustomItem(${product.id}, '${product.name}')">Add</button>
                        <span onclick="removeItem(${product.id})" style="cursor: pointer;">‚ùå</span>
                    </div>
                `;
				} else {
					div.innerHTML = `
                    <input type="checkbox" id="item${product.id}" onchange="saveItem(${product.id}, '${product.name}', ${product.price})">
                    <label for="item${product.id}">${product.name} - RM${product.price.toFixed(2)}</label>
                    <div style="display: flex; align-items: center;">
                        <button onclick="decreaseQuantity(${product.id})">-</button>
                        <span id="quantityDisplay${product.id}" style="padding: 0 10px;">1</span>
                        <button onclick="increaseQuantity(${product.id})">+</button>
                        <span onclick="removeItem(${product.id})" style="cursor: pointer;">‚ùå</span>
                    </div>
                `;
				}
				productList.appendChild(div);
			});
		}

		function removeItem(id) {
			const checkbox = document.getElementById('item' + id);
			if (checkbox) {
				checkbox.checked = false;
				checkbox.onchange(); // Ëß¶Âèë‰øùÂ≠òÊìç‰ΩúÔºåÁßªÈô§ÂïÜÂìÅ
			} else {
				// Â¶ÇÊûúÊòØËá™ÂÆö‰πâÂïÜÂìÅÔºåÁõ¥Êé•‰ªé selectedItems ‰∏≠Âà†Èô§
				for (const uniqueId in selectedItems) {
					if (uniqueId.startsWith(`${id}-`)) {
						delete selectedItems[uniqueId];
						break;
					}
				}
			}
			updateResult();
		}

		function increaseQuantity(id) {
			const quantityDisplay = document.getElementById(`quantityDisplay${id}`);
			let currentQuantity = parseInt(quantityDisplay.textContent);
			currentQuantity++;
			quantityDisplay.textContent = currentQuantity;
			saveQuantity(id, currentQuantity);  // Êõ¥Êñ∞ÈÄâ‰∏≠ÁöÑÂïÜÂìÅÊï∞Èáè
			updateResult();
		}

		function decreaseQuantity(id) {
			const quantityDisplay = document.getElementById(`quantityDisplay${id}`);
			let currentQuantity = parseInt(quantityDisplay.textContent);
			if (currentQuantity > 1) {  // Á°Æ‰øùÊï∞Èáè‰∏çÂ∞è‰∫é 1
				currentQuantity--;
				quantityDisplay.textContent = currentQuantity;
				saveQuantity(id, currentQuantity);  // Êõ¥Êñ∞ÈÄâ‰∏≠ÁöÑÂïÜÂìÅÊï∞Èáè
				updateResult();
			}
		}

		function searchItems() {
			const searchTerm = document.getElementById('searchBar').value.toLowerCase();
			const allProducts = Object.values(categories).flat();
			const filteredProducts = allProducts.filter(product => product.name.toLowerCase().includes(searchTerm));

			// Ê∏ÖÁ©∫Âª∫ËÆÆÂàóË°®
			const suggestionsDiv = document.getElementById('suggestions');
			suggestionsDiv.innerHTML = '';

			// Â¶ÇÊûúÊêúÁ¥¢Ê†è‰∏∫Á©∫Ôºå‰∏çÊòæÁ§∫Âª∫ËÆÆ
			if (searchTerm === '') {
				return;
			}

			// ÊòæÁ§∫Âª∫ËÆÆÂàóË°®
			filteredProducts.forEach(product => {
				const suggestionItem = document.createElement('div');
				suggestionItem.textContent = product.name;
				suggestionItem.onclick = function () {
					document.getElementById('searchBar').value = product.name;
					suggestionsDiv.innerHTML = '';  // Ê∏ÖÁ©∫Âª∫ËÆÆÂàóË°®
					loadProducts([product]);  // ÊòæÁ§∫ÈÄâ‰∏≠ÁöÑ‰∫ßÂìÅ‰ø°ÊÅØ
				};
				suggestionsDiv.appendChild(suggestionItem);
			});
		}

		function saveItem(id, name, price) {
			const checkbox = document.getElementById("item" + id);
			const quantity = parseInt(document.getElementById("quantityDisplay" + id).textContent) || 1;

			if (checkbox.checked) {
				selectedItems[id] = { name: name, quantity: quantity, price: price };
			} else {
				delete selectedItems[id];
			}

			// Â¶ÇÊûúËá≥Â∞ëÊúâ‰∏Ä‰∏™ÂïÜÂìÅË¢´ÈÄâÊã©ÔºåÊòæÁ§∫ÊîØ‰ªòÊñπÂºè
			if (Object.keys(selectedItems).length > 0) {
				togglePaymentMethod(true);
			} else {
				togglePaymentMethod(false);
			}

			updateResult();
		}

		function saveQuantity(id, quantity) {
			if (selectedItems[id]) {
				selectedItems[id].quantity = quantity;
			}
		}

		function toggleItems() {
			let checkboxes = document.querySelectorAll('#productList input[type="checkbox"]');
			let quantities = document.querySelectorAll('#productList input[type="number"]');

			checkboxes.forEach((checkbox) => (checkbox.disabled = false));
			quantities.forEach((quantity) => (quantity.disabled = false));
		}

		function showCategory() {
			let selectedCategory = document.querySelector('input[name="category"]:checked');

			if (selectedCategory) {
				let categoryValue = selectedCategory.value;
				let productsToShow = categories[categoryValue];

				if (productsToShow) {
					loadProducts(productsToShow);
				} else {
					console.error("Ê≤°ÊúâÊâæÂà∞ËØ•ÂàÜÁ±ªÁöÑÂïÜÂìÅ");
				}
			} else {
				console.error("Ê≤°ÊúâÈÄâ‰∏≠‰ªª‰ΩïÂàÜÁ±ª");
			}

			toggleItems();
		}

		function calculateTotal() {
			let total = 0;
			for (const item of Object.values(selectedItems)) {
				total += item.quantity * item.price;
			}
			return total.toFixed(2);
		}

		function updateResult() {
			let result = `Store: ${selectedStore}\n`;
			result += `Supervisor: ${supervisorName}\n`;
			result += `Cashier: ${cashierName}\n\n`;

			const formattedBillNumber = billNumber.toString().padStart(3, "0");
			result += `Bill No: ${formattedBillNumber}\n`;

			let selectedPaymentMethod = document.querySelector('input[name="store"]:checked');
			if (selectedPaymentMethod) {
				result += "Payment: " + selectedPaymentMethod.value + "\n\n";
			} else {
				result += "Payment: No Select\n";
			}

			for (const itemId in selectedItems) {
				const item = selectedItems[itemId];
				result += `${item.name} - ${item.quantity} pc, RM${(item.quantity * item.price).toFixed(2)}\n`;
			}

			result += `\nTotal: RM${calculateTotal()}\n`;

			const currentDate = new Date();
			const dateString = currentDate.toLocaleDateString();
			const timeString = currentDate.toLocaleTimeString();
			result += `\nDate: ${dateString}\nTime: ${timeString}`;

			document.getElementById("result").innerText = result;
		}

		function saveToStorage(position) {
			const text = document.getElementById('result').innerText;
			localStorage.setItem('salesItemPosition' + position, text);
			alert('Data Saved ' + position);
			const saveButton = document.querySelector(`button[onclick="saveToStorage(${position})"]`);
			saveButton.classList.add('saved-button');
		}

		function viewStorage(position) {
			const storedText = localStorage.getItem('salesItemPosition' + position);
			if (storedText) {
				alert('Save ' + position + ' Data:\n' + storedText);
			} else {
				alert('Save ' + position + ' No Data');
			}
		}

		function clearAll() {
			// Ê£ÄÊü•ÊòØÂê¶ÊúâÂïÜÂìÅ
			if (Object.keys(selectedItems).length === 0) {
				alert("Please add at least one product before proceeding to the next bill.");
				return;
			}

			// Ê£ÄÊü•ÊîØ‰ªòÊñπÂºè
			const selectedPaymentMethod = document.querySelector('input[name="store"]:checked');
			if (!selectedPaymentMethod) {
				alert("Please select a payment method before proceeding.");
				return;
			}

			const total = parseFloat(calculateTotal());

			// Â¶ÇÊûúÈÄâÊã©‰∫Ü CashÔºåÈúÄË¶ÅÁ°Æ‰øùËæìÂÖ•‰∫ÜÁé∞ÈáëÈáëÈ¢ù
			if (selectedPaymentMethod.value === "*Cash*") {
				const cashAmount = parseFloat(document.getElementById("cashAmount").value);

				if (isNaN(cashAmount) || cashAmount < total) {
					alert("Please enter a valid cash amount that is equal to or greater than the total amount.");
					return;
				}

				// Êõ¥Êñ∞ÈîÄÂîÆÁªüËÆ°Êï∞ÊçÆ
				salesSummary.cash += total;
			} else if (selectedPaymentMethod.value === "*Card*") {
				salesSummary.card += total; // Êõ¥Êñ∞ Card ÈîÄÂîÆÊï∞ÊçÆ
			} else if (selectedPaymentMethod.value === "*E-Wallet*") {
				salesSummary.ewallet += total; // Êõ¥Êñ∞ E-Wallet ÈîÄÂîÆÊï∞ÊçÆ
			}

			// Êõ¥Êñ∞Áâ©ÂìÅÁªüËÆ°Êï∞ÊçÆ
			for (const itemId in selectedItems) {
				const item = selectedItems[itemId];
				if (!soldItems[item.name]) {
					soldItems[item.name] = { quantity: 0, totalPrice: 0 };
				}
				soldItems[item.name].quantity += item.quantity;
				soldItems[item.name].totalPrice += item.quantity * item.price;
			}

			// Ëá™Âä®‰øùÂ≠òÂΩìÂâçÂçïÊçÆ
			saveBill();

			// Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ
			selectedItems = {};
			document.getElementById("productList").innerHTML = "";
			document.getElementById("result").innerText = "";
			document.querySelectorAll('input[name="store"]').forEach((input) => (input.checked = false));
			document.querySelectorAll('input[name="category"]').forEach((input) => (input.checked = false));
			togglePaymentMethod(false); // ÈöêËóèÊîØ‰ªòÊñπÂºè
			hideCashInput(); // ÈöêËóèÁé∞ÈáëËæìÂÖ•Ê°Ü
			toggleItems();
		}

		function toggleDarkMode() {
			const isDarkModeEnabled = document.body.classList.toggle('dark-mode');
			const toggleButton = document.querySelector('.toggle-mode-btn');

			if (isDarkModeEnabled) {
				toggleButton.textContent = 'ÂàáÊç¢Ëá≥Ê≠£Â∏∏Ê®°Âºè';
				localStorage.setItem('dark-mode', 'enabled');
			} else {
				toggleButton.textContent = 'ÂàáÊç¢Ëá≥ÈªëÊöóÊ®°Âºè';
				localStorage.setItem('dark-mode', 'disabled');
			}
		}

		function clearAllStorage() {
			selectedItems = {};
			document.getElementById('productList').innerHTML = '';
			document.getElementById('result').innerText = '';
			document.querySelectorAll('input[name="store"]').forEach(input => input.checked = false);
			document.querySelectorAll('input[name="category"]').forEach(input => input.checked = false);
			toggleItems();
			// Ê∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®ÂÜÖÂÆπÂπ∂Â§çÂéüÊåâÈíÆÈ¢úËâ≤
			for (let i = 1; i <= 5; i++) {
				localStorage.removeItem('salesItemPosition' + i);
				const saveButton = document.querySelector(`button[onclick="saveToStorage(${i})"]`);
				saveButton.classList.remove('saved-button');
			}
			alert('ÊâÄÊúâÂÜÖÂÆπÂ∑≤Ê∏ÖÁ©∫');
		}

		function toggleCashInput() {
			document.getElementById("cashInputContainer").style.display = "block";
			calculateChange();
		}

		function hideCashInput() {
			document.getElementById("cashInputContainer").style.display = "none";
			document.getElementById("changeAmount").textContent = "";
		}

		function calculateChange() {
			const cashAmount = parseFloat(document.getElementById("cashAmount").value) || 0;
			const total = parseFloat(calculateTotal());
			const change = cashAmount - total;

			if (!isNaN(change) && change >= 0) {
				document.getElementById("changeAmount").textContent = `Change: RM${change.toFixed(2)}`;
			} else if (!isNaN(change) && change < 0) {
				document.getElementById("changeAmount").textContent = `Insufficient amount`;
			} else {
				document.getElementById("changeAmount").textContent = "";
			}

			updateResult();
		}

		function selectPayment(radio) {
			// ÁßªÈô§ÊâÄÊúâÊîØ‰ªòÈÄâÈ°πÁöÑÈÄâ‰∏≠Ê†∑Âºè
			document.querySelectorAll(".payment-option").forEach((option) => {
				option.classList.remove("selected");
			});

			// ‰∏∫ÈÄâ‰∏≠ÁöÑÊîØ‰ªòÈÄâÈ°πÊ∑ªÂä†Ê†∑Âºè
			if (radio.checked) {
				radio.closest(".payment-option").classList.add("selected");
			}
		}

		function saveCustomItem(id, name) {
			const checkbox = document.getElementById('item' + id);
			const priceInput = document.getElementById('price' + id);
			const quantity = document.getElementById('quantityDisplay' + id).textContent || 1;
			const price = parseFloat(priceInput.value) || 0;

			if (checkbox.checked) {
				if (price <= 0) {
					alert('Please enter a valid price');
					checkbox.checked = false;
					return;
				}
				selectedItems[id] = { quantity: quantity, price: price };
			} else {
				delete selectedItems[id];
			}
			updateResult();
		}

		function updateCustomPrice(id) {
			const checkbox = document.getElementById('item' + id);
			if (checkbox.checked) {
				saveCustomItem(id, '');
			}
		}

		// Ê∑ªÂä†‰∏ìÈó®Â§ÑÁêÜ Add ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂ÁöÑÂáΩÊï∞
		function addCustomItem(id, name) {
			const priceInput = document.getElementById('price' + id);
			const price = parseFloat(priceInput.value);

			if (isNaN(price) || price <= 0) {
				alert('Please enter a valid price');
				return;
			}

			// ÁîüÊàêÂîØ‰∏ÄÁöÑ IDÔºåÈÅøÂÖçÈáçÂ§ç
			const uniqueId = `${id}-${Date.now()}`;

			// Ê∑ªÂä†Âà∞ selectedItemsÔºåÁ°Æ‰øùÊØèÊ¨°ÈÉΩÊòØÊñ∞ËÆ∞ÂΩï
			selectedItems[uniqueId] = { name: name, quantity: 1, price: price };

			updateResult();

			// Âú®È°µÈù¢‰∏äÊòæÁ§∫ÊàêÂäü‰ø°ÊÅØ
			const successMessage = document.createElement('div');
			successMessage.textContent = `${name} added successfully!`;
			successMessage.style.color = 'green';
			document.body.appendChild(successMessage);
			setTimeout(() => successMessage.remove(), 3000); // 3ÁßíÂêéËá™Âä®ÁßªÈô§ÊèêÁ§∫‰ø°ÊÅØ
		}

		function saveBill() {
			const text = document.getElementById("result").innerText;
			const formattedBillNumber = billNumber.toString().padStart(3, "0"); // Ê†ºÂºèÂåñ‰∏∫‰∏â‰ΩçÊï∞ÔºåÂ¶Ç 001, 002

			// Â∞ÜÂçïÊçÆÂ≠òÂÇ®Âà∞ localStorage ‰∏≠
			localStorage.setItem(`bill_${formattedBillNumber}`, text);

			// Êõ¥Êñ∞ÂçïÊçÆÁºñÂè∑
			billNumber++;
			localStorage.setItem("billNumber", billNumber); // ‰øùÂ≠òÊñ∞ÁöÑÂçïÊçÆÁºñÂè∑Âà∞ localStorage

			updateCurrentBillDisplay();

			alert(`Bill ${formattedBillNumber} saved successfully!`);
		}

		function updateCurrentBillDisplay() {
			const formattedBillNumber = billNumber.toString().padStart(3, "0");
			document.getElementById("currentBillDisplay").textContent = `Current Bill: ${formattedBillNumber}`;
		}

		function searchBill(billInput) {
			const billKey = `bill_${billInput}`;
			const billData = localStorage.getItem(billKey);

			if (billData) {
				showModal(billData, billInput); // Ë∞ÉÁî®Ê®°ÊÄÅÊ°ÜÂπ∂‰º†ÈÄíÂΩìÂâçÂçïÊçÆÁºñÂè∑
			} else {
				alert(`Bill ${billInput} not found.`);
			}
		}

		function showModal(data, currentBill) {
			// ÂàõÂª∫‰∏Ä‰∏™Ê®°ÊÄÅÊ°Ü
			const modal = document.createElement("div");
			modal.id = "modalContainer";
			
			modal.style.position = "fixed";
			modal.style.top = "50%";
			modal.style.left = "50%";
			modal.style.transform = "translate(-50%, -50%)";
			modal.style.backgroundColor = "white";
			modal.style.color = "black";
			modal.style.padding = "20px";
			modal.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.2)";
			modal.style.borderRadius = "8px";
			modal.style.zIndex = "1000";
			modal.style.width = "90%"; // ÂÆΩÂ∫¶ÈÄÇÈÖçÊâãÊú∫
			modal.style.maxWidth = "400px"; // ÊúÄÂ§ßÂÆΩÂ∫¶
			modal.style.maxHeight = "80%"; // ÊúÄÂ§ßÈ´òÂ∫¶
			modal.style.overflowY = "auto"; // ÂÜÖÂÆπÊ∫¢Âá∫Êó∂ÊªöÂä®

			// Ê∑ªÂä†ÂçïÊçÆÂÜÖÂÆπ
			const content = document.createElement("pre");
			content.style.color = "black";
			content.style.margin = "0";
			content.style.whiteSpace = "pre-wrap"; // Ëá™Âä®Êç¢Ë°å
			content.textContent = data;
			modal.appendChild(content);

			// Ê∑ªÂä†ÊåâÈíÆÂÆπÂô®
			const buttonContainer = document.createElement("div");
			buttonContainer.style.display = "flex";
			buttonContainer.style.justifyContent = "space-between";
			buttonContainer.style.marginTop = "20px";

			// Ê∑ªÂä†"Ââç‰∏ÄÂº†"ÊåâÈíÆ
			const prevButton = document.createElement("button");
			prevButton.textContent = "Previous Bill";
			prevButton.style.backgroundColor = "#007bff";
			prevButton.style.color = "white";
			prevButton.style.padding = "10px";
			prevButton.style.border = "none";
			prevButton.style.borderRadius = "5px";
			prevButton.style.cursor = "pointer";
			prevButton.onclick = function () {
				const prevBill = (parseInt(currentBill) - 1).toString().padStart(3, "0");
				if (localStorage.getItem(`bill_${prevBill}`)) {
					document.body.removeChild(modal); // ÂÖ≥Èó≠ÂΩìÂâçÊ®°ÊÄÅÊ°Ü
					searchBill(prevBill); // Âä†ËΩΩÂâç‰∏ÄÂº†ÂçïÊçÆ
				} else {
					alert("No previous bill found.");
				}
			};
			buttonContainer.appendChild(prevButton);

			// Ê∑ªÂä†"Âêé‰∏ÄÂº†"ÊåâÈíÆ
			const nextButton = document.createElement("button");
			nextButton.textContent = "Next Bill";
			nextButton.style.backgroundColor = "#007bff";
			nextButton.style.color = "white";
			nextButton.style.padding = "10px";
			nextButton.style.border = "none";
			nextButton.style.borderRadius = "5px";
			nextButton.style.cursor = "pointer";
			nextButton.onclick = function () {
				const nextBill = (parseInt(currentBill) + 1).toString().padStart(3, "0");
				if (localStorage.getItem(`bill_${nextBill}`)) {
					document.body.removeChild(modal); // ÂÖ≥Èó≠ÂΩìÂâçÊ®°ÊÄÅÊ°Ü
					searchBill(nextBill); // Âä†ËΩΩÂêé‰∏ÄÂº†ÂçïÊçÆ
				} else {
					alert("No next bill found.");
				}
			};
			buttonContainer.appendChild(nextButton);

			modal.appendChild(buttonContainer);

			// Ê∑ªÂä†ÂÖ≥Èó≠ÊåâÈíÆ
			const closeButton = document.createElement("button");
			closeButton.textContent = "Close";
			closeButton.style.marginTop = "20px";
			closeButton.style.backgroundColor = "red";
			closeButton.style.color = "white";
			closeButton.style.padding = "10px";
			closeButton.style.border = "none";
			closeButton.style.borderRadius = "5px";
			closeButton.style.cursor = "pointer";
			closeButton.style.display = "block"; // Áã¨Âç†‰∏ÄË°å
			closeButton.style.margin = "10px auto 0"; // Â±Ö‰∏≠
			closeButton.onclick = function () {
				document.body.removeChild(modal);
			};

			modal.appendChild(closeButton);

			// Ê∑ªÂä†Ê®°ÊÄÅÊ°ÜÂà∞ body
			document.body.appendChild(modal);
		}

		function deleteBill() {
			const billInput = document.getElementById("billSearchInput").value.trim();
			if (billInput === "") {
				alert("Please enter a valid bill number.");
				return;
			}

			const billKey = `bill_${billInput}`;
			const billData = localStorage.getItem(billKey);

			if (billData) {
				const confirmDelete = confirm(`Are you sure you want to delete bill ${billInput}?`);
				if (confirmDelete) {
					localStorage.removeItem(billKey);
					alert(`Bill ${billInput} deleted successfully.`);
				}
			} else {
				alert(`Bill ${billInput} not found.`);
			}
		}

		function togglePaymentMethod(show) {
			const paymentSection = document.querySelector(".payment-section");
			if (show) {
				paymentSection.style.display = "block"; // ÊòæÁ§∫ÊîØ‰ªòÊñπÂºè
			} else {
				paymentSection.style.display = "none"; // ÈöêËóèÊîØ‰ªòÊñπÂºè
			}
		}

		function showSalesClosing() {
			const totalSales = salesSummary.cash + salesSummary.card + salesSummary.ewallet;

			const modal = document.createElement("div");
			modal.id = "modalContainer";
			modal.style.position = "fixed";
			modal.style.top = "50%";
			modal.style.left = "50%";
			modal.style.transform = "translate(-50%, -50%)";
			modal.style.backgroundColor = "white";
			modal.style.color = "black";
			modal.style.padding = "20px";
			modal.style.boxShadow = "0 4px 8px rgba(0, 0, 0, 0.2)";
			modal.style.borderRadius = "8px";
			modal.style.zIndex = "1000";
			modal.style.width = "90%";
			modal.style.maxWidth = "400px";
			modal.style.maxHeight = "80%";
			modal.style.overflowY = "auto";

			const content = document.createElement("div");
			content.style.color = "black";

			// ÂïÜÂìÅÊéíÂ∫èÔºöÊåâË¥≠‰π∞Êï∞ÈáèÈôçÂ∫è
			const sortedItems = Object.entries(soldItems).sort((a, b) => b[1].quantity - a[1].quantity);
			let itemDetails = "";
			sortedItems.forEach(([itemName, item]) => {
				itemDetails += `<p>${itemName} - Quantity: ${item.quantity}, Total: RM${item.totalPrice.toFixed(2)}</p>`;
			});

			content.innerHTML = `
				<h3>Sales Closing</h3>
				<p><strong>Store:</strong> ${selectedStore}</p>
				<p><strong>Supervisor:</strong> ${supervisorName}</p>
				<p><strong>Cashier:</strong> ${cashierName}</p>
				<p><strong>Cash:</strong> RM${salesSummary.cash.toFixed(2)}</p>
				<p><strong>Card:</strong> RM${salesSummary.card.toFixed(2)}</p>
				<p><strong>E-Wallet:</strong> RM${salesSummary.ewallet.toFixed(2)}</p>
				<p><strong>Total Sales:</strong> RM${totalSales.toFixed(2)}</p>
				<h4>Sold Items (Sorted by Quantity):</h4>
				${itemDetails}
			`;
			modal.appendChild(content);

			const pdfButton = document.createElement("button");
			pdfButton.textContent = "Generate PDF";
				pdfButton.style.marginTop = "10px";
				pdfButton.style.backgroundColor = "#007bff";
				pdfButton.style.color = "white";
				pdfButton.style.padding = "10px";
				pdfButton.style.border = "none";
				pdfButton.style.borderRadius = "5px";
				pdfButton.style.cursor = "pointer";
				pdfButton.onclick = generatePDF;
				modal.appendChild(pdfButton);

			const closeButton = document.createElement("button");
			closeButton.textContent = "Close";
			closeButton.style.marginTop = "10px";
			closeButton.style.backgroundColor = "red";
			closeButton.style.color = "white";
			closeButton.style.padding = "10px";
			closeButton.style.border = "none";
			closeButton.style.borderRadius = "5px";
			closeButton.style.cursor = "pointer";
			closeButton.onclick = function () {
				document.body.removeChild(modal);
			};

			modal.appendChild(closeButton);

			document.body.appendChild(modal);
		}

		async function generatePDF() {
			const { jsPDF } = window.jspdf;
			const doc = new jsPDF();

			// Ëé∑ÂèñÂΩìÂâçÊó•Êúü
			const currentDate = new Date();
			const dateString = currentDate.toLocaleDateString();
			const formattedDate = `${dateString}`;

			// Ê†áÈ¢òÂíåÊó•Êúü
			doc.setFontSize(18);
			doc.text("Sales Closing Report", 10, 20);
			doc.setFontSize(12);
			doc.text(`Date: ${formattedDate}`, 180, 20, { align: "right" });

			// Â∫óÈì∫„ÄÅSupervisor Âíå Cashier ‰ø°ÊÅØ
			doc.text(`Store: ${selectedStore}`, 10, 40);
			doc.text(`Supervisor: ${supervisorName}`, 10, 50);
			doc.text(`Cashier: ${cashierName}`, 10, 60);

			// ÈîÄÂîÆÊñπÂºèÁªüËÆ°
			doc.text("Sales Summary:", 10, 80);
			doc.text(`Cash: RM${salesSummary.cash.toFixed(2)}`, 20, 90);
			doc.text(`Card: RM${salesSummary.card.toFixed(2)}`, 20, 100);
			doc.text(`E-Wallet: RM${salesSummary.ewallet.toFixed(2)}`, 20, 110);
			const totalSales = salesSummary.cash + salesSummary.card + salesSummary.ewallet;
			doc.text(`Total Sales: RM${totalSales.toFixed(2)}`, 20, 120);

			// ÂàÜÈöîÁ∫ø
			doc.setLineWidth(0.5);
			doc.line(10, 130, 200, 130);

			// ÂîÆÂá∫Áâ©ÂìÅÁªüËÆ°ÔºàÊåâË¥≠‰π∞ÊÄªÊï∞‰ªéÈ´òÂà∞‰ΩéÊéíÂ∫èÔºâ
			const sortedItems = Object.entries(soldItems).sort((a, b) => b[1].quantity - a[1].quantity);

			doc.text("Sold Items (Sorted by Quantity):", 10, 140);
			let y = 150; // Ëµ∑Âßã‰ΩçÁΩÆ
			sortedItems.forEach(([itemName, item]) => {
				doc.text(
					`${itemName} - Quantity: ${item.quantity}, Total: RM${item.totalPrice.toFixed(2)}`,
					20,
					y
				);
				y += 10;
			});

			// ‰øùÂ≠ò PDF Êñá‰ª∂
			const pdfFileName = `${selectedStore}_${formattedDate.replace(/\//g, "-")}.pdf`;
			doc.save(pdfFileName);
		}

	</script>
	<p class="contact-info">If you have any questions or need to add new products, please contact me (Mark).</p>

	<!-- Supervisor Âíå Cashier ËæìÂÖ•Ê®°ÊÄÅÊ°Ü -->
	<div id="supervisorModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; padding: 20px; width: 300px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); z-index: 1000;">
		<h3 style="text-align: center; color: black;">Enter Supervisor and Cashier</h3>
		<div style="display: flex; flex-direction: column; align-items: center; gap: 15px; margin-top: 20px;">
			<input id="supervisorInput" type="text" placeholder="Supervisor Name" style="width: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 16px;">
			<input id="cashierInput" type="text" placeholder="Cashier Name" style="width: 200px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; font-size: 16px;">
			<button onclick="submitSupervisorAndCashier()" style="width: 200px; height: 50px; font-size: 16px; background-color: black; color: white; border: none; border-radius: 5px; cursor: pointer;">Submit</button>
		</div>
	</div>

	<!-- Â∫óÈì∫ÈÄâÊã©Ê®°ÊÄÅÊ°Ü -->
	<div id="storeModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; border-radius: 10px; padding: 20px; width: 300px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); z-index: 1000;">
		<h3 style="text-align: center; color: black;">Select Store</h3>
		<div style="display: flex; flex-direction: column; align-items: center; gap: 15px; margin-top: 20px;">
			<button onclick="selectStore('JKL')" style="width: 200px; height: 50px; font-size: 16px; background-color: black; color: white; border: none; border-radius: 5px; cursor: pointer;">JKL</button>
			<button onclick="selectStore('TOM')" style="width: 200px; height: 50px; font-size: 16px; background-color: black; color: white; border: none; border-radius: 5px; cursor: pointer;">TOM</button>
			<button onclick="selectStore('Ole-Ole')" style="width: 200px; height: 50px; font-size: 16px; background-color: black; color: white; border: none; border-radius: 5px; cursor: pointer;">Ole-Ole</button>
		</div>
	</div>

</body>

</html>
