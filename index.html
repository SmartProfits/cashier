<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashier Tools</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 15px;
            margin: 0;
            background-color: #FBFCFC;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark-mode {
            background-color: #1c1c1c;
            color: #e0e0e0;
        }

        .category-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        #productList div {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        #productList label {
            flex-grow: 1;
            margin-right: 10px;
        }

        #suggestions {
            border: 1px solid #ccc;
            max-height: 150px;
            overflow-y: auto;
            background-color: white;
            position: absolute;
            width: 170px;
            z-index: 10;
        }

        #suggestions div {
            padding: 8px;
            cursor: pointer;
            color: #333;
        }

        #suggestions div:hover {
            background-color: #f0f0f0;
        }

        input[type="number"] {
            width: 80px;
            margin-left: 10px;
            text-align: right;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 110px;
        }

        #result {
            width: 100%;
            height: 150px;
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            white-space: pre-wrap;
            overflow: auto;
            font-size: 1.1rem;
            background-color: #fff;
            border-radius: 8px;
        }

        .button-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        button {
            padding: 12px 18px;
            font-size: 1.1rem;
            margin: 5px;
            cursor: pointer;
            width: 48%;
            border: none;
            border-radius: 8px;
        }

        .toggle-mode-btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            margin-bottom: 20px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
        }

        .saved-button {
            background-color: #add8e6; /* 浅蓝色 */
        }
    </style>
</head>
<body>
    <button class="toggle-mode-btn" onclick="toggleDarkMode()">切换至黑暗模式</button>
    <h1>Sales Listing</h1>
    <h3>Payment</h3>
    <div>
        <label><input type="radio" name="store" value="*Cash*" onclick="toggleItems()"> Cash</label>
        <label><input type="radio" name="store" value="*Card*" onclick="toggleItems()"> Card</label>
        <label><input type="radio" name="store" value="*E-Wallet*" onclick="toggleItems()"> E-wallet</label>
    </div>

    <h3>Category</h3>
    <div class="category-container" id="categoryContainer"></div>

    <h3>Item (default is 1）</h3>
    <div id="productList"></div>

    <div class="action-buttons">
        <button onclick="generateText()">Generate</button>
        <button onclick="clearAll()">Next Customers</button>
    </div>

    <div id="result"></div>

    <div class="button-container">
        <button onclick="saveToStorage(1)">Save 1</button>
        <button onclick="viewStorage(1)">View 1</button>
    </div>
    <div class="button-container">
        <button onclick="saveToStorage(2)">Save 2</button>
        <button onclick="viewStorage(2)">View 2</button>
    </div>
    <div class="button-container">
        <button onclick="saveToStorage(3)">Save 3</button>
        <button onclick="viewStorage(3)">View 3</button>
    </div>
    <div class="button-container">
        <button onclick="saveToStorage(4)">Save 4</button>
        <button onclick="viewStorage(4)">View 4</button>
    </div>
    <div class="button-container">
        <button onclick="saveToStorage(5)">Save 5</button>
        <button onclick="viewStorage(5)">View 5</button>
    </div>
    <button onclick="clearAllStorage()">Clear All</button>

               <script>
    // 分类商品
    const categories = {
        BanHeang: [
            { id: 1, name: "Tambun Original", price: 0 },
            { id: 2, name: "Tambun Pandan", price: 0 },
            { id: 3, name: "Tambun White Lotus", price: 0 },
            { id: 4, name: "Tau Sar Pheah", price: 0 },
            { id: 5, name: "Heong Pheah", price: 0 },
            { id: 6, name: "Beh Teh Saw", price: 0 },
            { id: 7, name: "Phong Pheah", price: 0 },
            { id: 8, name: "Pepper Biscuit", price: 0 },
            { id: 9, name: "Hup Toh Soh", price: 0 },
            { id: 10, name: "Omlette Crisp Chocolate", price: 0 },
            { id: 11, name: "Omlette Crisp Pandan", price: 0 },
            { id: 12, name: "Kai Chai Biscuit", price: 0 },
            { id: 13, name: "Almond Slice", price: 0 },
            { id: 14, name: "Almond Slice Salted Egg", price: 0 },
            { id: 15, name: "Durian Crisp", price: 0 },
            { id: 16, name: "Coconut Crisp", price: 0 },
            { id: 17, name: "Salted Fish Crisp", price: 0 },
            { id: 18, name: "Salted Egg Crisp", price: 0 },
            { id: 19, name: "Cheese Crisp", price: 0 },
            { id: 20, name: "Chic Kut Teh", price: 0 },
            { id: 21, name: "Ginger Slice", price: 0 },
            { id: 26, name: "Dried Mango", price: 0 },
            { id: 27, name: "Kacang Tumbuk", price: 0 },
            { id: 28, name: "Gula Kacang", price: 0 },
            { id: 29, name: "Black Sesame Peanut", price: 0 },
            { id: 30, name: "Shat Kek Ma", price: 0 },
            { id: 31, name: "Shat Kek Ma (Brown Sugar)", price: 0 },
            { id: 32, name: "Coconut Biscuits", price: 0 },
            { id: 33, name: "BH Freeze Dried Durian", price: 0 },
            { id: 34, name: "BH Freeze Dried Mango", price: 0 },
            { id: 36, name: "Butter Cookies", price: 0 },
            { id: 37, name: "Chocolate Cookies", price: 0 },
            { id: 38, name: "Raisin Cookies", price: 0 },
            { id: 39, name: "Almond Cookies", price: 0 },
            { id: 40, name: "Pineapple Tart", price: 0 },
            { id: 41, name: "Red Bean Mochi", price: 0 },
            { id: 42, name: "Peanut Mochi", price: 0 },
            { id: 43, name: "Green Tea Mochi", price: 0 },
            { id: 44, name: "Durian Mochi", price: 0 },
            { id: 45, name: "Yam Mochi", price: 0 },
            { id: 46, name: "Mochi Milk Yam Filling", price: 0 },
            { id: 47, name: "Mochi Milk Mango Filling", price: 0 },
            { id: 48, name: "Mochi Milk Green Tea", price: 0 },
            { id: 52, name: "Fillet Cracker With Anchovy", price: 0 },
            { id: 53, name: "Fillet Cracker With Seaweed", price: 0 },
            { id: 54, name: "Sakura Shrimp", price: 0 },
            { id: 60, name: "Frugurt Yogurt Blueberry", price: 0 },
            { id: 61, name: "Frugurt Yogurt Peach", price: 0 },
            { id: 62, name: "Frugurt Yogurt Mango", price: 0 },
            { id: 63, name: "Durian Pudding", price: 0 },
            { id: 64, name: "Coconut Pudding", price: 0 },
            { id: 65, name: "BH Dodol Durian", price: 0 },
            { id: 66, name: "BH Dodol Coconut", price: 0 },
            { id: 67, name: "BH Dodol Pandan", price: 0 },
            { id: 68, name: "Durian Beh Teh Saw", price: 0 },
        ],
        HopHup: [
            { id: 70, name: "Musang King Tart", price: 0 },
            { id: 71, name: "Mango Tart", price: 0 },
            { id: 72, name: "Durian Wafer Roll", price: 0 },
            { id: 73, name: "Omelette Durian", price: 0 },
            { id: 76, name: "HT Coconut Ori Cookies", price: 0 },
            { id: 77, name: "HT Coconut Pandan Cookies", price: 0 },
            { id: 78, name: "HT Dodol Kopi", price: 0 },
            { id: 79, name: "HT Dodol Durian", price: 0 },
            { id: 80, name: "HT Freeze Dried Mango", price: 0 },
            { id: 81, name: "HT Freeze Dried Durian", price: 0 },
            { id: 82, name: "Salted Egg Fish Skin", price: 0 },
            { id: 83, name: "Salted Egg Fish Skin Spicy", price: 0 },
            { id: 84, name: "Salted Egg Salmon Skin", price: 0 },
            { id: 94, name: "Musang King Durian Candy", price: 0 },
            { id: 126, name: "HT Dried Fruit Mango ", price: 0 }
        ],
        Chocolate: [
            { id: 108, name: "AD Chocolate Durian", unit: 'pc', price: 0 },
            { id: 109, name: "AD Chocolate Sabah Tea", unit: 'pc', price: 0 },
            { id: 110, name: "AD Chocolate Mango", unit: 'pc', price: 0 },
            { id: 111, name: "AD Chocolate Chili", unit: 'pc', price: 0 },
            { id: 112, name: "AD Chocolate Dark", unit: 'pc', price: 0 },
            { id: 113, name: "AD Chocolate Coffee", unit: 'pc', price: 0 },
            { id: 114, name: "AD Chocolate Banana", unit: 'pc', price: 0 },
            { id: 115, name: "AD Chocolate Tiramisu", unit: 'pc', price: 0 },
            { id: 116, name: "AD Chocolate Mint", unit: 'pc', price: 0 },
            { id: 117, name: "AD Chocolate Rambutan", unit: 'pc', price: 0 },
            { id: 118, name: "AD Chocolate Soursup", unit: 'pc', price: 0 }
        ],
        Sotong: [
            { id: 85, name: "Cuttlefish Red", price: 0 },
            { id: 86, name: "Cuttlefish Lemon", price: 0 },
            { id: 87, name: "Cuttlefish Honey", price: 0 },
            { id: 88, name: "Cuttlefish Floss Original", price: 0 },
            { id: 89, name: "Cuttlefish Massive", price: 0 },
            { id: 90, name: "Cuttlefish Whole", price: 0 },
            { id: 91, name: "Cuttlefish Roasted", price: 0 },
            { id: 92, name: "Cuttlefish Chili", price: 0 },
            { id: 93, name: "Five Star Cuttlefish", price: 0 },
            { id: 49, name: "BH Sotong Cuttlefish", price: 0 },
            { id: 50, name: "BH Gula Cuttlefish", price: 0 },
            { id: 51, name: "BH Satay Fish", price: 0 }
         ],
        Coffee: [
            { id: 22, name: "BH W/Coffee(Mini)", price: 0 },
            { id: 23, name: "BH W/Coffee(Mini)No Sugar", price: 0 },
            { id: 25, name: "BH Durian W/Coffee(Mini)", price: 0 },
            { id: 24, name: "BH Teh Tarik(Mini)", price: 0 },
            { id: 55, name: "BH W/Coffee", price: 0 },
            { id: 119, name: "BH W/Coffee No Sugar", price: 0 },
            { id: 56, name: "BH Kopi O 2in1", price: 0 },
            { id: 57, name: "BH Kopi O No Sugar", price: 0 },
            { id: 58, name: "BH Teh Tarik", price: 0 },
            { id: 59, name: "BH Durian White Coffee", price: 0 },
            { id: 99, name: "Kopi Tenom Silver", price: 0 },
            { id: 100, name: "Kopi Tenom Gold", price: 0 },
            { id: 101, name: "Kopi Tenom Blue", price: 0 },
            { id: 102, name: "Kopi Tenom Green", price: 0 },
            { id: 125, name: "Kopi Tenom Red ", price: 0 }
        ],
        Amplang: [
            { id: 96, name: "Amplang Ikan", price: 0 },
            { id: 97, name: "Amplang Udang", price: 0 },
            { id: 98, name: "Amplang Sotong", price: 0 }
        ],
        Other: [
            { id: 106, name: "Fruity Gummy Assorted", price: 0 },
            { id: 124, name: "Fruity Gummy Mango", price: 0 },
            { id: 69, name: "Durian Kuih", price: 0 },
            { id: 120, name: "Anchovy Blue", price: 0 },
            { id: 121, name: "Anchovy Green", price: 0 },
            { id: 122, name: "Anchovy Red", price: 0 },
            { id: 123, name: "Anchovy Yellow", price: 0 }
        ]
    };

        let selectedItems = {};

        window.onload = function() {
            const savedMode = localStorage.getItem('dark-mode');
            if (savedMode === 'enabled') {
                document.body.classList.add('dark-mode');
                document.querySelector('.toggle-mode-btn').textContent = '切换至正常模式';
            }
            toggleItems();
            
            // 动态创建商品分类按钮
            const categoryContainer = document.getElementById('categoryContainer');
            for (let category in categories) {
                const label = document.createElement('label');
                label.innerHTML = `<input type="radio" name="category" value="${category}" onclick="showCategory()">${category}`;
                categoryContainer.appendChild(label);
            }
        };

        function loadProducts(products) {
            const productList = document.getElementById('productList');
            productList.innerHTML = '';

            products.forEach(product => {
                const div = document.createElement('div');
                div.innerHTML = `
                    <input type="checkbox" id="item${product.id}" onchange="saveItem(${product.id}, '${product.name}', ${product.price})">
                    <label for="item${product.id}">${product.name} - $${product.price.toFixed(2)}</label>
                    <input type="number" id="quantity${product.id}" min="1" placeholder="数量" onchange="saveQuantity(${product.id})">
                `;
                productList.appendChild(div);
            });
        }

        function saveItem(id, name, price) {
            const checkbox = document.getElementById('item' + id);
            const quantity = document.getElementById('quantity' + id).value || 1;

            if (checkbox.checked) {
                selectedItems[id] = { quantity: quantity, price: price };
            } else {
                delete selectedItems[id];
            }
        }

        function saveQuantity(id) {
            const quantity = document.getElementById('quantity' + id).value || 1;
            if (selectedItems[id]) {
                selectedItems[id].quantity = quantity;
            }
        }

        function toggleItems() {
            let selectedStore = document.querySelector('input[name="store"]:checked');
            let checkboxes = document.querySelectorAll('#productList input[type="checkbox"]');
            let quantities = document.querySelectorAll('#productList input[type="number"]');

            if (selectedStore) {
                checkboxes.forEach(checkbox => checkbox.disabled = false);
                quantities.forEach(quantity => quantity.disabled = false);
            } else {
                checkboxes.forEach(checkbox => checkbox.disabled = true);
                quantities.forEach(quantity => quantity.disabled = true);
            }
        }

        function showCategory() {
            let selectedCategory = document.querySelector('input[name="category"]:checked');
            
            if (selectedCategory) {
                let categoryValue = selectedCategory.value;
                let productsToShow = categories[categoryValue];
                
                if (productsToShow) {
                    loadProducts(productsToShow);
                } else {
                    console.error("没有找到该分类的商品");
                }
            } else {
                console.error("没有选中任何分类");
            }

            toggleItems();
        }

        function calculateTotal() {
            let total = 0;
            for (const item of Object.values(selectedItems)) {
                total += item.quantity * item.price;
            }
            return total.toFixed(2);
        }

        function generateText() {
            let result = '';
            let selectedStore = document.querySelector('input[name="store"]:checked');
            if (selectedStore) {
                result += 'Payment: ' + selectedStore.value + '\n\n';
            } else {
                result += 'Payment: No Select\n';
            }

            for (const [id, { quantity, price }] of Object.entries(selectedItems)) {
                const product = Object.values(categories).flat().find(p => p.id == id);
                if (product) {
                    result += `${product.name} - ${quantity} 件, $${(quantity * price).toFixed(2)}\n`;
                }
            }

            result += `\nTotal: RM${calculateTotal()}\n`;
            result += '\nCashier Tools: smartprofits.github.io/order/';
            document.getElementById('result').innerText = result;
            return result;
        }

        function saveToStorage(position) {
            const text = generateText();
            localStorage.setItem('salesItemPosition' + position, text);
            alert('Data Saved ' + position);
            const saveButton = document.querySelector(`button[onclick="saveToStorage(${position})"]`);
            saveButton.classList.add('saved-button');
        }

        function viewStorage(position) {
            const storedText = localStorage.getItem('salesItemPosition' + position);
            if (storedText) {
                alert('Save ' + position + ' Data:\n' + storedText);
            } else {
                alert('Save ' + position + ' No Data');
            }
        }

        function clearAll() {
            selectedItems = {};
            document.getElementById('productList').innerHTML = '';
            document.getElementById('result').innerText = '';
            document.querySelectorAll('input[name="store"]').forEach(input => input.checked = false);
            document.querySelectorAll('input[name="category"]').forEach(input => input.checked = false);
            toggleItems();
        }

        function toggleDarkMode() {
            const isDarkModeEnabled = document.body.classList.toggle('dark-mode');
            const toggleButton = document.querySelector('.toggle-mode-btn');

            if (isDarkModeEnabled) {
                toggleButton.textContent = '切换至正常模式';
                localStorage.setItem('dark-mode', 'enabled');
            } else {
                toggleButton.textContent = '切换至黑暗模式';
                localStorage.setItem('dark-mode', 'disabled');
            }
        }

        function clearAllStorage() {
            selectedItems = {};
            document.getElementById('productList').innerHTML = '';
            document.getElementById('result').innerText = '';
            document.querySelectorAll('input[name="store"]').forEach(input => input.checked = false);
            document.querySelectorAll('input[name="category"]').forEach(input => input.checked = false);
            toggleItems();
            // 清除本地存储内容并复原按钮颜色
            for (let i = 1; i <= 5; i++) {
                localStorage.removeItem('salesItemPosition' + i);
                const saveButton = document.querySelector(`button[onclick="saveToStorage(${i})"]`);
                saveButton.classList.remove('saved-button');
            }
            alert('所有内容已清空');
        }
        
    </script>
</body>
</html>